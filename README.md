##### 设计思路

​		功能分两部分，一部分是使用SSH登录服务器，另一部分是对读取的文件进行处理。

​		SSH登录的功能由Jsch完成，因为功能的目的是输入一条指令，并获取回复，从简洁角度考虑采用ChannelExec，执行处理后便关闭连接。

​		文件处理，处理方式就是将每次读取的内容转成字符串，再进行遍历，根据记录的三个部分，分别处理，生成字符串。最后写入文件。

##### 方案施行

​		首先完成的是字节流的处理。这里因为读取的是字节流，且读取长度是1013。而中文字符占用两个字节。有一定概率造成，当前读取的字节流缓冲区中只读取一半的中文字符，转换成乱码。

​		起初考虑的是在遍历到字符串的最后，判断一下上一次的分隔节点是什么，上一次节点到最后这段字符串再转换成字节数组，和下一次读取的字节数组进行拼接。但因多次转换后生成的字节数组已经不是原来的字节数组而舍弃方案。转而记录当前缓冲区中有多少字符和汉字已经被处理，直接计算处理了多少字节，再在元字节数组上截取。将剩余的字节数组和下一次读取的字节数组进行合并，再重新转换成字符串。

​		SSH登录并没有耗费太多时间，直接采用Jsch完成。

##### 优化方案

​		暂时想到的是改成多线程，但目前处理和写入并没有分离，多线程帮助不大。如果处理和写入分离，就需要另外内存空间暂存处理好的字符。如果处理文件小还好，文件大就很占用空间。





